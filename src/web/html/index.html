<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Meta -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- css -->
    <link rel="stylesheet" href="../css/index">

    <!-- libs -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <title>Real One Documentation</title>
</head>

<body>
    <div id="web">
        <div id="navigation-bar">
            <div id="bar-image-name-wrapper">
                <div id="bar-image-wrapper">
                    <img src="" alt="" class="bot-image" id="bar-image">
                </div>
                <div id="bar-text-wrapper">
                    <div id="bar-name">Real One</div>
                </div>
            </div>
            <div id="search-bar-wrapper">
                <div id="search">
                    <div id="search-icon">
                        <?xml version="1.0" ?>
                        <!DOCTYPE svg
                            PUBLIC '-//W3C//DTD SVG 1.0//EN' 'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'>
                        <svg enable-background="new 0 0 24 24" id="Layer_1" version="1.0" viewBox="0 0 24 24"
                            xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink">
                            <g>
                                <g>
                                    <path
                                        d="M9,4c2.8,0,5,2.2,5,5s-2.2,5-5,5s-5-2.2-5-5S6.2,4,9,4 M9,2C5.1,2,2,5.1,2,9c0,3.9,3.1,7,7,7s7-3.1,7-7C16,5.1,12.9,2,9,2    L9,2z" />
                                </g>
                            </g>
                            <g>
                                <polygon points="22,20.3 20.3,22 14,15.7 14,14 15.7,14  " />
                                <rect height="3.6" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -5.9741 14.4227)"
                                    width="1.2" x="13.8" y="12.6" />
                            </g>
                        </svg>
                    </div>
                    <div id="search-input-wrapper">
                        <input type="text" name="search" id="search-input" placeholder="Search" autocomplete="off">
                    </div>
                </div>
            </div>
        </div>
        <div id="content-wrapper">
            <div id="main">
                <div id="navigation" class="sidebar">

                </div>
                <div id="main-content">
                    fsdfsdf
                </div>
                <div class="sidebar"></div>
            </div>
        </div>
    </div>
    <script>
        async function GetCommands() {
            let commands = await $.get("./resources/commands")
            const arrow = `<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" viewBox="0 -256 1792 1792" id="svg3001" version="1.1" inkscape:version="0.48.3.1 r9886" width="100%" height="100%" sodipodi:docname="chevron_down_font_awesome.svg"><metadata id="metadata3011"><rdf:RDF> <cc:Work rdf:about=""> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /> </cc:Work> </rdf:RDF> </metadata> <defs id="defs3009" /> <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="640" inkscape:window-height="480" id="namedview3007" showgrid="false" inkscape:zoom="0.13169643" inkscape:cx="896" inkscape:cy="896" inkscape:window-x="0" inkscape:window-y="25" inkscape:window-maximized="0" inkscape:current-layer="svg3001" /> <g transform="matrix(1,0,0,-1,68.338983,1133.5593)" id="g3003"> <path d="m 1611,832 q 0,-53 -37,-90 L 923,91 Q 885,53 832,53 778,53 742,91 L 91,742 q -38,36 -38,90 0,53 38,91 l 74,75 q 39,37 91,37 53,0 90,-37 l 486,-486 486,486 q 37,37 90,37 52,0 91,-37 l 75,-75 q 37,-39 37,-91 z" id="path3005" inkscape:connector-curvature="0" style="fill:currentColor" /> </g> </svg>`
            for (let key in commands) {
                let div = `
<div class="navigation-block">
    <div class="navigation-key-wrapper">
        <span class="navigation-key">${key}</span>
        <div class="navigation-arrow">${arrow}</div>
    </div>
<div class="navigation-command-list" hidden="true">`
                for (let i = 0; i < commands[key].length; i++) {
                    const el = commands[key][i];
                    div += `<div class="navigation-command-wrapper"><span class="navigation-command">${el}</span></div>`
                }
                div += `</div>`
                div += "</div>"
                $("#navigation").append(div)
            }
            console.log(commands)
            AnimateArrows()
        }
        function AnimateArrows() {
            $(".navigation-block").click(e => {
                const arrow = $(e.currentTarget).children(".navigation-key-wrapper").children(".navigation-arrow")
                const commands = $(e.currentTarget).children(".navigation-command-list")
                if (arrow.hasClass("toggled")) return UnToggleArrows()
                commands.attr("hidden", false)
                UnToggleArrows()
                arrow.css("transform", "rotate(90deg)")
                arrow.toggleClass("toggled")
                ChangeMain($(e.currentTarget).find(".navigation-key").text())
            })
        }
        async function ChangeMain(category) {
            let data = await $.get("./resources/commands/" + category)
            console.log(data);
            const main = $("#main-content")
            main.html("")
            for (let key in data) {
                const command = data[key]
                let html = `
<div id="${command.Title.replace(/\s/g, "-")}" class="command-wrapper">
    <div class="command-title-wrapper">
        <span class="command-title">${command.Title}</span>
    </div>
    <div class="command-description-wrapper">
        <span class="command-description">${command.Description}</span>
    </div>
    <br>
    <div class="command-usage-wrapper">
        <div class="usage-text">Usage</div>
        <span class="command-usage">${command.Usage}</span>
    </div>
</div>`
                main.append(html)
            }

        }
        function UnToggleArrows() {
            $(".navigation-block").each((_, elm) => {
                const arrow = $(elm).children(".navigation-key-wrapper").children(".navigation-arrow")
                const commands = $(elm).children(".navigation-command-list")
                if (!arrow.hasClass("toggled")) return
                commands.attr("hidden", "true")
                arrow.css("transform", "rotate(0deg)")
                arrow.toggleClass("toggled")
            })
        }
        async function SetBotImages() {
            var url = await $.get("./resources/botimage")
            var imgs = document.getElementsByClassName("bot-image")
            for (let i = 0; i < imgs.length; i++) {
                imgs[i].src = url
            }
        }
        GetCommands()
        SetBotImages()
    </script>


</body>

</html>